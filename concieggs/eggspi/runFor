#!/bin/sh
#
# Run a simple shell command in the service of some channel or user.
# This will decorate the output with specifications of where it is
# supposed to go at the IRC-level.

sayTo() {
    destination=$1

    fmt -w 380 | gawk '{ print ":m", DEST, $0 }' "DEST=$destination"
}
where=$1
shift
((("$@" 2>&4 | sayTo "$where" >&3) 4>&1) | sayTo "$CONCIEGGS_ERROR_CHANNEL" >&3) 3>&1
