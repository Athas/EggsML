#!/bin/sh
#
# Få concieggs til at holde sin kæft i ti minutter.

eval "$(echo "$@" | tolower | parse '.*(?<shutUp>[kK][æÆ]+[fF][tT])[!.]*')"

if [ "$shutUp" ]; then
    countaggression=$(echo "$@" |  sed 's/[^!æÆ]*//g' |wc -c)
    countwords=$(echo "$@" | wc -w)
    count=$(($countaggression - 2 + $countwords - 1))
    duration=$((60*10*$count))
    time=$(($(nowTime) + $duration))
    echo $count

    echo $time | dbWrite shutUpUntil
    if isKing "$EGGS_USER"; then
        echo "$(ack)  Jeg skal nok tie stille (indtil $(timeToDate $time))."
    else
        echo "Det synes du jeg skal? .. Tak. Så er jeg vel først velkommen igen $(timeToDate $time), ikke, \"Mester\" $EGGS_USER?"
        annoyedBy "$EGGS_USER" 10
    fi
else
    echo "Hold min hvad?"
fi
