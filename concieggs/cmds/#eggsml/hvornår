#!/bin/sh
#
# Spørg om essentielle datoer.

eval "$(echo "$@" | parse '(?<birthday>har jeg fødselsdag)')"

who=$(randomName $EGGS_USER)
if ! [ "$who" ]; then
    echo "$EGGS_USER: Jeg kender dig slet, slet, slet ikke.  Hvad laver du her?"
    exit
fi

if [ "$birthday" ]; then
    date=$(dbUserRead $who birthday)
    if ! [ "$date" ]; then
        echo "$EGGS_USER: Du har aldrig fødselsdag!"
    elif [ "$date" == $(dateToday) ]; then
        echo "$EGGS_USER: DU HAR FØDSELSDAG I DAG!  HURRRAAAAA!"
    else
        echo "$EGGS_USER: Du har fødselsdag d. $date!"
    fi
else
    echo "Brug: hvornår <har jeg fødselsdag>?"
fi
