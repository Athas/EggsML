#!/bin/sh

set -f

sviner() {
    when=$1
    who=$2
    echo "$who: JEG HADER DIG."
    echo "$who: Hvad sker der med $(titleEggs $when)?  Kom i sving!"
    echo "$who: Forventer du at jeg posteggser $(titleEggs $when) for dig?"
    echo "$who: Din mor spiser her ikke.  Du var med til $(titleEggs $when), så post den eggs!"
    echo "$who: Du er spild af Jordens sparsomme ilt.  Se så at få gjort noget ved $(titleEggs $when), den er stadigvæk ikke blevet postet."
    echo "$who: Følgende sjuskede svin spiste $(titleEggs $eggs): $(describeEggs $eggs).  Hvorfor fanden har I ikke postet?"
    echo "$who: Se så at få postet $(titleEggs $eggs)!  Du er den sygdom der inficerer frokostlogen."
    echo "$who: Selv et slamkodet shell script kan se at du ikke har styr på en skid!  Hvorfor har du ikke postet $(titleEggs $eggs)?!"
}

fuck() {
    ex="$(sviner $1 $2 | randomise | head -n 1)"
    if [ "$ex" ]; then
        echo "$ex"
    fi
}

prevEggs | while read eggs; do
    if [ "$(isInEggs $eggs $EGGS_USER)" ]; then
        fuck $eggs $EGGS_USER
    fi
done
