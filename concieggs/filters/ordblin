#!/usr/bin/env perl
use 5.012;
use warnings;
use utf8::all;

sub ivrig {
    my $length = length shift;
    my $result = '';
    $result .= $_[rand(@_)] for (1..$length+rand(4));
    return $result;
}

while (my $text = <>) {
    # Mindre kompleks grammatik
    $text =~ s/[.,;"-]/ /g;
    $text =~ s/(!+)/ivrig($1, '!', '1')/eg;
    $text =~ s/(\?+)/ivrig($1, '?', '+')/eg;

    # Stumme bogstaver, fonetisk stavning
    $text =~ s/gjort/gjordt/g;
    $text =~ s/\Ber\b/e/g;
    $text =~ s/nde/ne/g;
    $text =~ s/ind/in/g;
    $text =~ s/hv/v/g;
    $text =~ s/dt/t/g;
    $text =~ s/ogs책/osse/g;
    $text =~ s/ige/ie/g;
    $text =~ s/책d/책/g;
    $text =~ s/ig/i/g;
    $text =~ s/rd/r/g;
    $text =~ s/ej/aj/g;

    # Ord-endelser
    $text =~ s/et\b/ed/;
    $text =~ s/ede\b/et/g;
    $text =~ s/l\b//g;

    # Undg책 dobbelt-konsonanter
    $text =~ s/([bcdfghjklmnpqrstvwxz])\1/\1/g;

    # nutids-r
    $text =~ s/rer /\@e\@ /g;
    $text =~ s/re /rer /g;
    $text =~ s/\@e\@ /re /g;
    $text =~ s/rer\./\@e\@\./g;
    $text =~ s/re\./rer\./g;
    $text =~ s/\@e\@\./re\./g;
    $text =~ s/rer,/\@e\@,/g;
    $text =~ s/re,/rer,/g;
    $text =~ s/\@e\@,/re,/g;

    print $text;
}
